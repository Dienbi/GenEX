{% extends 'users/base.html' %}

{% block title %}Voice Evaluation - GenEX{% endblock %}

{% block content %}
<h2>Voice Evaluation</h2>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px;">
    <h3 style="margin-top: 0;">ðŸŽ¤ Evaluate Your Speaking Skills</h3>
    <p>Record or upload your voice to get instant feedback on your communication skills!</p>
    <a href="{% url 'voice_eval:voice-eval-record' %}" class="btn" style="background: white; color: #667eea;">Start Evaluation</a>
</div>

<h3>Your Recent Evaluations</h3>

{% if evaluations %}
<div style="display: grid; gap: 15px;">
    {% for eval in evaluations %}
    <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid {% if eval.total_score >= 80 %}#28a745{% elif eval.total_score >= 60 %}#ffc107{% else %}#dc3545{% endif %};">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h4 style="margin: 0 0 10px 0;">
                    {{ eval.language|upper }} - {{ eval.created_at|date:"M d, Y H:i" }}
                </h4>
                {% if eval.theme %}
                <p style="margin: 0 0 10px 0; color: #666;">Theme: {{ eval.theme }}</p>
                {% endif %}
                <p style="margin: 0;">
                    <strong>Level:</strong> {{ eval.get_estimated_level_display|default:"Processing..." }}
                    | <strong>Duration:</strong> {{ eval.duration|floatformat:1 }}s
                </p>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 32px; font-weight: bold; color: {% if eval.total_score >= 80 %}#28a745{% elif eval.total_score >= 60 %}#ffc107{% else %}#dc3545{% endif %};">
                    {{ eval.total_score|floatformat:0 }}
                </div>
                <div style="font-size: 14px; color: #666;">Total Score</div>
                <a href="{% url 'voice_eval:voice-eval-detail' eval.id %}" style="margin-top: 10px; display: inline-block;">View Details</a>
            </div>
        </div>
        
        {% if eval.processing_status != 'completed' %}
        <div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px;">
            Status: {{ eval.get_processing_status_display }}
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% else %}
<div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 8px;">
    <p style="font-size: 18px; color: #666;">No evaluations yet. Start your first evaluation!</p>
    <a href="{% url 'voice_eval:voice-eval-record' %}" class="btn">Record Now</a>
</div>
{% endif %}

<div style="margin-top: 40px; padding: 20px; background: #e7f3ff; border-radius: 8px;">
    <h4>How It Works:</h4>
    <ol style="line-height: 1.8;">
        <li><strong>Record or Upload:</strong> Speak for 30-180 seconds on any topic</li>
        <li><strong>AI Analysis:</strong> Our AI evaluates your verbal and paraverbal communication</li>
        <li><strong>Get Feedback:</strong> Receive detailed scores and personalized recommendations</li>
        <li><strong>Track Progress:</strong> Monitor your improvement over time</li>
    </ol>
    <p><strong>Supported Languages:</strong> English, French</p>
</div>
{% endblock %}